---
import type { GetStaticPaths } from "astro";
import wasteData from "../../../data/quizzes/selection/waste.json";
import chengyuData from "../../../data/quizzes/selection/chengyu.json";
import selectionData from "../../../data/quizzes/selection.json";
import SelectionQuiz from "../../../components/quizzes/selection/SelectionQuiz.svelte";
import Layout from "../../../layouts/Layout.astro";
import NavBar from "../../../components/common/NavBar.astro";
import { SEO } from 'astro-seo';

export const getStaticPaths = (() => {
  return [
    {
      params: {
        quiz: "chengyu"
      },
      props: {
        title: "Chengyu Challenge",
        data: chengyuData,
        instructions: selectionData.chengyu.instructions,
        oneChoice: true,
        passingScore: 1
      }
    },
    { 
      params: {
        quiz: "waste" 
      },
      props: {
        title: "What a Waste!",
        data: wasteData,
        instructions: selectionData.waste.instructions,
        passingScore: 0.75
      }
    }
  ];
}) satisfies GetStaticPaths;
export const prerender = true;
const images = import.meta.glob<{ default: ImageMetadata }>('/src/img/**/*.jpg');
const seoImg = await images[`/src/img/quizzes/selection/${Astro.params.quiz}.jpg`]().then(img => img.default.src);
---
<SEO
  title={`${Astro.props.title} | Izz Hafeez`}
  description={Astro.props.instructions}
  canonical={`https://izzhafeez.com/quizzes/selection/${Astro.params.quiz}`}
  openGraph={{
    basic: {
      title: `${Astro.props.title} | Izz Hafeez`,
      type: "website",
      image: seoImg,
      url: `https://izzhafeez.com/quizzes/selection/${Astro.params.quiz}`
    }
  }}
  extend={{
    // extending the default link tags
    link: [{ rel: "icon", href: "/favicon.png" }],
    // extending the default meta tags
    meta: [
      {
        name: "twitter:image",
        content: seoImg,
      },
      { name: "twitter:title", content: `${Astro.props.title} | Izz Hafeez`},
      { name: "twitter:description", content: Astro.props.instructions },
    ],
  }}
/>

<Layout>
  <div slot="main">
    <NavBar/>
    <SelectionQuiz client:load title={Astro.props.title} data={Astro.props.data} instructions={Astro.props.instructions} key={Astro.params.quiz} oneChoice={Astro.props.oneChoice || false} passingScore={Astro.props.passingScore}/>
  </div>
</Layout> 
<link href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-minimal@4/minimal.css" rel="stylesheet">
<script is:inline src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>