---
import { Image } from "astro:assets";
import Tags from "./Tags.astro";
import type { ImageMetadata } from "astro";
import { toName } from "../../utils/string";

const { href, title, heroText, site, key, imgPath, isEager, tags=[] } = Astro.props;

let textColor = "group-hover:text-gray-500 dark:group-hover:text-gray-300";
switch (site) {
  case 'apps':
    textColor = "group-hover:text-ew-500 dark:group-hover:text-ew-300";
    break;
  case 'portfolio':
    textColor = "group-hover:text-ne-500 dark:group-hover:text-ne-300";
    break;
  case 'quizzes':
    textColor = "group-hover:text-ns-500 dark:group-hover:text-ns-300";
    break;
  case 'games':
    textColor = "group-hover:text-dt-500 dark:group-hover:text-dt-300";
    break;
}

const images = import.meta.glob<{ default: ImageMetadata }>('/src/img/**/*.jpg');
---

<a role="button" href={href} id={key} class={`reveal group w-full p-4 rounded-lg flex gap-4`}>
  {imgPath && <Image src={images[`/src${imgPath}`]()} alt={title} width="130" height="100" class="h-24 w-32 object-cover aspect-video hidden lg:block" loading={isEager && 'eager'}/>}
  <div>
    <h2 class={`${textColor} font-medium  flex items-center gap-2`}>  
      {toName(title)} 
    </h2>
    <p class="text-gray-500 text-sm my-2">{heroText}</p>
    <Tags tags={tags} site={site}/>
  </div>
</a>